<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.joker.mapper.ItemsMapperCustom">
<!--    <resultMap id="baseMap" type="com.joker.pojo.vo.ItemsCommentsVO">-->
<!--        &lt;!&ndash;-->
<!--          WARNING - @mbg.generated-->
<!--        &ndash;&gt;-->
<!--        <result column="commentLevel" property="commentLevel" />-->
<!--        <result column="content" property="content" />-->
<!--        <result column="specName" property="specName" />-->
<!--        <result column="createdTime" property="createdTime" />-->
<!--        <result column="userFace" property="userFace" />-->
<!--        <result column="nickname" property="nickname" />-->
<!--    </resultMap>-->
    <select id="queryItemComments" parameterType="map" resultType="com.joker.pojo.vo.ItemsCommentsVO">
        SELECT ic.comment_level AS commentLevel,
               ic.content       AS content,
               ic.sepc_name     AS specName,
               ic.created_time  AS createdTime,
               u.face           AS userFace,
               u.nickname       AS nickname

        FROM items_comments ic
                 LEFT JOIN users u ON ic.user_id = u.id
        WHERE ic.item_id = #{paramMap.itemId}
          <if test=" paramMap.level != null and paramMap.level != '' ">
            AND ic.comment_level = 1
          </if>
    </select>
</mapper>